<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <title>System Facts</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script crossorigin src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
</head>
<body>
    <div class="container my-4" id="root"></div>
    <script type="text/babel">
    fetch('data.json')
      .then(response => response.json())
      .then(data => {
        function App() {
          const [search, setSearch] = React.useState('');
          const filtered = data.filter(h =>
            h.hostname.toLowerCase().includes(search.toLowerCase())
          );
          return (
            <div>
              <h1 class="mb-4">Collected System Facts</h1>
              <input
                class="form-control mb-3"
                placeholder="Search host"
                value={search}
                onChange={e => setSearch(e.target.value)}
              />
              <table class="table table-striped table-bordered">
                <thead class="table-light">
                  <tr>
                    <th>Hostname</th>
                    <th>CPU Load</th>
                    <th>Memory</th>
                    <th>Disk</th>
                    <th>Users</th>
                    <th>Listening Ports</th>
                  </tr>
                </thead>
                <tbody>
                  {filtered.map((h, i) => (
                    <tr key={i}>
                      <td>{h.hostname}</td>
                      <td>{h.cpu_load}</td>
                      <td>{h.memory}</td>
                      <td>{h.disk}</td>
                      <td>
                        <ul class="mb-0">{h.users.map((u, j) => <li key={j}>{u}</li>)}</ul>
                      </td>
                      <td>
                        <ul class="mb-0">{h.ports.map((p, j) => <li key={j}>{p}</li>)}</ul>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          );
        }
        ReactDOM.render(<App />, document.getElementById('root'));
      });
    </script>
</body>
</html>
